<<<<<<< Updated upstream
!function(){"use strict";var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}},t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(e){return!(!/(^|[ ,])tinymcespellchecker([, ]|$)/.test(e.settings.plugins)||!t.get("tinymcespellchecker")||("undefined"!=typeof window.console&&window.console.log&&window.console.log("Spell Checker Pro is incompatible with Spell Checker plugin! Remove 'spellchecker' from the 'plugins' option."),0))},r=function(e){return e.getParam("spellchecker_languages","English=en,Danish=da,Dutch=nl,Finnish=fi,French=fr_FR,German=de,Italian=it,Polish=pl,Portuguese=pt_BR,Spanish=es,Swedish=sv")},o=function(e){var t=e.getParam("language","en");return e.getParam("spellchecker_language",t)},i=function(e){return e.getParam("spellchecker_rpc_url")},c=function(e){return e.getParam("spellchecker_callback")},a=function(e){var t=new RegExp('[^\\s!"#$%&()*+,-./:;<=>?@[\\]^_{|}`\xa7\xa9\xab\xae\xb1\xb6\xb7\xb8\xbb\xbc\xbd\xbe\xbf\xd7\xf7\xa4\u201d\u201c\u201e\xa0\u2002\u2003\u2009]+',"g");return e.getParam("spellchecker_wordchar_pattern",t)},l=tinymce.util.Tools.resolve("tinymce.util.Tools"),s=tinymce.util.Tools.resolve("tinymce.util.URI"),u=tinymce.util.Tools.resolve("tinymce.util.XHR"),d=function(e){return e.fire("SpellcheckStart")},f=function(e){return e.fire("SpellcheckEnd")};function h(e){return e&&1===e.nodeType&&"false"===e.contentEditable}function g(e,t){var n,r,o,i,c,a=[],l=t.dom;function s(e,t){if(!e[0])throw new Error("findAndReplaceDOMText cannot handle zero-length matches");return{start:e.index,end:e.index+e[0].length,text:e[0],data:t}}function u(t){var n=e.getElementsByTagName("*"),r=[];t="number"==typeof t?""+t:null;for(var o=0;o<n.length;o++){var i=n[o],c=i.getAttribute("data-mce-index");null!==c&&c.length&&-1!==i.className.indexOf("mce-spellchecker-word")&&(c!==t&&null!==t||r.push(i))}return r}function d(e){for(var t=a.length;t--;)if(a[t]===e)return t;return-1}function f(e){for(var t=0,n=a.length;t<n&&!1!==e(a[t],t);t++);return this}function g(e){var t,n,r=u(e?d(e):null);for(t=r.length;t--;)(n=r[t]).parentNode.insertBefore(n.firstChild,n),n.parentNode.removeChild(n);return this}function m(e){var n=u(d(e)),r=t.dom.createRng();return r.setStartBefore(n[0]),r.setEndAfter(n[n.length-1]),r}return o=t.schema.getBlockElements(),i=t.schema.getWhiteSpaceElements(),c=t.schema.getShortEndedElements(),{text:r=function p(e){var t;if(3===e.nodeType)return e.data;if(i[e.nodeName]&&!o[e.nodeName])return"";if(h(e))return"\n";if(t="",(o[e.nodeName]||c[e.nodeName])&&(t+="\n"),e=e.firstChild)for(;t+=p(e),e=e.nextSibling;);return t}(e),matches:a,each:f,filter:function(e){var t=[];return f(function(n,r){e(n,r)&&t.push(n)}),a=t,this},reset:function(){return a.splice(0,a.length),g(),this},matchFromElement:function(e){return a[e.getAttribute("data-mce-index")]},elementFromMatch:function(e){return u(d(e))[0]},find:function(e,t){if(r&&e.global)for(;n=e.exec(r);)a.push(s(n,t));return this},add:function(e,t,n){return a.push({start:e,end:e+t,text:r.substr(e,t),data:n}),this},wrap:function(t){return a.length&&function(e,t,n){var r,a,l,s,u,d=[],f=0,g=e,m=0;(t=t.slice(0)).sort(function(e,t){return e.start-t.start}),u=t.shift();e:for(;;){if((o[g.nodeName]||c[g.nodeName]||h(g))&&f++,3===g.nodeType&&(!a&&g.length+f>=u.end?(a=g,s=u.end-f):r&&d.push(g),!r&&g.length+f>u.start&&(r=g,l=u.start-f),f+=g.length),r&&a){if(g=n({startNode:r,startNodeIndex:l,endNode:a,endNodeIndex:s,innerNodes:d,match:u.text,matchIndex:m}),f-=a.length-s,r=null,a=null,d=[],m++,!(u=t.shift()))break}else if(i[g.nodeName]&&!o[g.nodeName]||!g.firstChild){if(g.nextSibling){g=g.nextSibling;continue}}else if(!h(g)){g=g.firstChild;continue}for(;;){if(g.nextSibling){g=g.nextSibling;break}if(g.parentNode===e)break e;g=g.parentNode}}}(e,a,function(e){function t(t,n){var r=a[n];r.stencil||(r.stencil=e(r));var o=r.stencil.cloneNode(!1);return o.setAttribute("data-mce-index",n),t&&o.appendChild(l.doc.createTextNode(t)),o}return function(e){var n,r,o,i=e.startNode,c=e.endNode,a=e.matchIndex,s=l.doc;if(i===c){var u=i;o=u.parentNode,e.startNodeIndex>0&&(n=s.createTextNode(u.data.substring(0,e.startNodeIndex)),o.insertBefore(n,u));var d=t(e.match,a);return o.insertBefore(d,u),e.endNodeIndex<u.length&&(r=s.createTextNode(u.data.substring(e.endNodeIndex)),o.insertBefore(r,u)),u.parentNode.removeChild(u),d}n=s.createTextNode(i.data.substring(0,e.startNodeIndex)),r=s.createTextNode(c.data.substring(e.endNodeIndex));for(var f=t(i.data.substring(e.startNodeIndex),a),h=[],g=0,m=e.innerNodes.length;g<m;++g){var p=e.innerNodes[g],v=t(p.data,a);p.parentNode.replaceChild(v,p),h.push(v)}var x=t(c.data.substring(0,e.endNodeIndex),a);return(o=i.parentNode).insertBefore(n,i),o.insertBefore(f,i),o.removeChild(i),(o=c.parentNode).insertBefore(x,c),o.insertBefore(r,c),o.removeChild(c),x}}(t)),this},unwrap:g,replace:function(e,n){var r=m(e);return r.deleteContents(),n.length>0&&r.insertNode(t.dom.doc.createTextNode(n)),r},rangeFromMatch:m,indexOf:d}}var m,p=function(e,t){if(!t.get()){var n=g(e.getBody(),e);t.set(n)}return t.get()},v=function(e,t,n,r,o,a,d){var f,h,g,m=c(e);(m||(f=e,h=t,g=n,function(e,t,n,r){var o={method:e,lang:g.get()},c="";o["addToDictionary"===e?"word":"text"]=t,l.each(o,function(e,t){c&&(c+="&"),c+=t+"="+encodeURIComponent(e)}),u.send({url:new s(h).toAbsolute(i(f)),type:"post",content_type:"application/x-www-form-urlencoded",data:c,success:function(e){if(e=JSON.parse(e))e.error?r(e.error):n(e);else{var t=f.translate("Server response wasn't proper JSON.");r(t)}},error:function(){var e=f.translate("The spelling service was not found: (")+i(f)+f.translate(")");r(e)}})})).call(e.plugins.spellchecker,r,o,a,d)},x=function(e,t,n){e.dom.select("span.mce-spellchecker-word").length||N(e,t,n)},N=function(e,t,n){if(p(e,n).reset(),n.set(null),t.get())return t.set(!1),f(e),!0},k=function(e){var t=e.getAttribute("data-mce-index");return"number"==typeof t?""+t:t},y=function(e,t,n,r,o){var i,c;if("string"!=typeof o&&o.words?(c=!!o.dictionary,i=o.words):i=o,e.setProgressState(!1),function(e){for(var t in e)return!1;return!0}(i)){var l=e.translate("No misspellings found.");return e.notificationManager.open({text:l,type:"info"}),void t.set(!1)}r.set({suggestions:i,hasDictionarySupport:c}),p(e,n).find(a(e)).filter(function(e){return!!i[e.text]}).wrap(function(t){return e.dom.create("span",{"class":"mce-spellchecker-word","data-mce-bogus":1,"data-mce-word":t.text})}),t.set(!0),d(e)},S={spellcheck:function(e,t,n,r,o,i){N(e,n,r)||(e.setProgressState(!0),v(e,t,i,"spellcheck",p(e,r).text,function(t){y(e,n,r,o,t)},function(t){e.notificationManager.open({text:t,type:"error"}),e.setProgressState(!1),N(e,n,r)}),e.focus())},checkIfFinished:x,addToDictionary:function(e,t,n,r,o,i,c){e.setProgressState(!0),v(e,t,o,"addToDictionary",i,function(){e.setProgressState(!1),e.dom.remove(c,!0),x(e,n,r)},function(t){e.notificationManager.open({text:t,type:"error"}),e.setProgressState(!1)})},ignoreWord:function(e,t,n,r,o,i){e.selection.collapse(),i?l.each(e.dom.select("span.mce-spellchecker-word"),function(t){t.getAttribute("data-mce-word")===r&&e.dom.remove(t,!0)}):e.dom.remove(o,!0),x(e,t,n)},findSpansByIndex:function(e,t){var n,r=[];if((n=l.toArray(e.getBody().getElementsByTagName("span"))).length)for(var o=0;o<n.length;o++){var i=k(n[o]);null!==i&&i.length&&i===t.toString()&&r.push(n[o])}return r},getElmIndex:k,markErrors:y},w=function(e,t,n,r,i){return{getTextMatcher:function(){return r.get()},getWordCharPattern:function(){return a(e)},markErrors:function(o){S.markErrors(e,t,r,n,o)},getLanguage:function(){return o(e)}}},b=function(e,t,n,r,o,i){e.addCommand("mceSpellCheck",function(){S.spellcheck(e,t,n,r,o,i)})},T=function(e,t,n,i,c,a){var s,u,d,f,h=(d=e,s=l.map(r(d).split(","),function(e){return{name:(e=e.split("="))[0],value:e[1]}}),u=[],l.each(s,function(e){u.push({selectable:!0,text:e.name,data:e.value})}),u),g=function(){S.spellcheck(e,t,n,i,a,c)},m={tooltip:"Spellcheck",onclick:g,onPostRender:function(t){var r=t.control;e.on("SpellcheckStart SpellcheckEnd",function(){r.active(n.get())})}};h.length>1&&(m.type="splitbutton",m.menu=h,m.onshow=(f=e,function(e){var t=o(f);e.control.items().each(function(e){e.active(e.settings.data===t)})}),m.onselect=function(e){c.set(e.control.settings.data)}),e.addButton("spellchecker",m),e.addMenuItem("spellchecker",{text:"Spellcheck",context:"tools",onclick:g,selectable:!0,onPostRender:function(){var t=this;t.active(n.get()),e.on("SpellcheckStart SpellcheckEnd",function(){t.active(n.get())})}})},I=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),E=tinymce.util.Tools.resolve("tinymce.ui.Factory"),P=function(e,t,n,r,o,i){e.on("click",function(c){var a=c.target;if("mce-spellchecker-word"===a.className){c.preventDefault();var s=S.findSpansByIndex(e,S.getElmIndex(a));if(s.length>0){var u=e.dom.createRng();u.setStartBefore(s[0]),u.setEndAfter(s[s.length-1]),e.selection.setRng(u),function(e,t,n,r,o,i,c,a){var s=[],u=n.get().suggestions[c];l.each(u,function(t){s.push({text:t,onclick:function(){e.insertContent(e.dom.encode(t)),e.dom.remove(a),S.checkIfFinished(e,r,o)}})}),s.push({text:"-"}),n.get().hasDictionarySupport&&s.push({text:"Add to Dictionary",onclick:function(){S.addToDictionary(e,t,r,o,i,c,a)}}),s.push.apply(s,[{text:"Ignore",onclick:function(){S.ignoreWord(e,r,o,c,a)}},{text:"Ignore all",onclick:function(){S.ignoreWord(e,r,o,c,a,!0)}}]),(m=E.create("menu",{items:s,context:"contextmenu",onautohide:function(e){-1!==e.target.className.indexOf("spellchecker")&&e.preventDefault()},onhide:function(){m.remove(),m=null}})).renderTo(document.body);var d=I.DOM.getPos(e.getContentAreaContainer()),f=e.dom.getPos(a[0]),h=e.dom.getRoot();"BODY"===h.nodeName?(f.x-=h.ownerDocument.documentElement.scrollLeft||h.scrollLeft,f.y-=h.ownerDocument.documentElement.scrollTop||h.scrollTop):(f.x-=h.scrollLeft,f.y-=h.scrollTop),d.x+=f.x,d.y+=f.y,m.moveTo(d.x,d.y+a[0].offsetHeight)}(e,t,n,r,o,i,a.getAttribute("data-mce-word"),s)}}})};t.add("spellchecker",function(t,r){if(!1===n(t)){var i=e(!1),c=e(o(t)),a=e(null),l=e({});return T(t,r,i,a,c,l),P(t,r,l,i,a,c),b(t,r,i,a,l,c),w(t,i,l,a,r)}})}();
=======
!function(){var a={},b=function(b){for(var c=a[b],e=c.deps,f=c.defn,g=e.length,h=new Array(g),i=0;i<g;++i)h[i]=d(e[i]);var j=f.apply(null,h);if(void 0===j)throw"module ["+b+"] returned undefined";c.instance=j},c=function(b,c,d){if("string"!=typeof b)throw"module id must be a string";if(void 0===c)throw"no dependencies for "+b;if(void 0===d)throw"no definition function for "+b;a[b]={deps:c,defn:d,instance:void 0}},d=function(c){var d=a[c];if(void 0===d)throw"module ["+c+"] was undefined";return void 0===d.instance&&b(c),d.instance},e=function(a,b){for(var c=a.length,e=new Array(c),f=0;f<c;++f)e[f]=d(a[f]);b.apply(null,e)},f={};f.bolt={module:{api:{define:c,require:e,demand:d}}};var g=c,h=function(a,b){g(a,[],function(){return b})};g("1",[],function(){var a=function(b){var c=b,d=function(){return c},e=function(a){c=a},f=function(){return a(d())};return{get:d,set:e,clone:f}};return a}),h("9",tinymce.util.Tools.resolve),g("2",["9"],function(a){return a("tinymce.PluginManager")}),g("5",[],function(){var a=function(a){var b="English=en,Danish=da,Dutch=nl,Finnish=fi,French=fr_FR,German=de,Italian=it,Polish=pl,Portuguese=pt_BR,Spanish=es,Swedish=sv";return a.getParam("spellchecker_languages",b)},b=function(a){var b=a.getParam("language","en");return a.getParam("spellchecker_language",b)},c=function(a){return a.getParam("spellchecker_rpc_url")},d=function(a){return a.getParam("spellchecker_callback")},e=function(a){var b=new RegExp('[^\\s!"#$%&()*+,-./:;<=>?@[\\]^_{|}`\xa7\xa9\xab\xae\xb1\xb6\xb7\xb8\xbb\xbc\xbd\xbe\xbf\xd7\xf7\xa4\u201d\u201c\u201e\xa0\u2002\u2003\u2009]+',"g");return a.getParam("spellchecker_wordchar_pattern",b)};return{getLanguages:a,getLanguage:b,getRpcUrl:c,getSpellcheckerCallback:d,getSpellcheckerWordcharPattern:e}}),g("c",["9"],function(a){return a("tinymce.util.Tools")}),g("g",["9"],function(a){return a("tinymce.util.URI")}),g("h",["9"],function(a){return a("tinymce.util.XHR")}),g("i",[],function(){var a=function(a){return a.fire("SpellcheckStart")},b=function(a){return a.fire("SpellcheckEnd")};return{fireSpellcheckStart:a,fireSpellcheckEnd:b}}),g("j",[],function(){function a(a){return a&&1===a.nodeType&&"false"===a.contentEditable}return function(b,c){function d(a,b){if(!a[0])throw"findAndReplaceDOMText cannot handle zero-length matches";return{start:a.index,end:a.index+a[0].length,text:a[0],data:b}}function e(b){var c;if(3===b.nodeType)return b.data;if(z[b.nodeName]&&!y[b.nodeName])return"";if(a(b))return"\n";if(c="",(y[b.nodeName]||A[b.nodeName])&&(c+="\n"),b=b.firstChild)do c+=e(b);while(b=b.nextSibling);return c}function f(b,c,d){var e,f,g,h,i,j=[],k=0,l=b,m=0;c=c.slice(0),c.sort(function(a,b){return a.start-b.start}),i=c.shift();a:for(;;){if((y[l.nodeName]||A[l.nodeName]||a(l))&&k++,3===l.nodeType&&(!f&&l.length+k>=i.end?(f=l,h=i.end-k):e&&j.push(l),!e&&l.length+k>i.start&&(e=l,g=i.start-k),k+=l.length),e&&f){if(l=d({startNode:e,startNodeIndex:g,endNode:f,endNodeIndex:h,innerNodes:j,match:i.text,matchIndex:m}),k-=f.length-h,e=null,f=null,j=[],i=c.shift(),m++,!i)break}else if(z[l.nodeName]&&!y[l.nodeName]||!l.firstChild){if(l.nextSibling){l=l.nextSibling;continue}}else if(!a(l)){l=l.firstChild;continue}for(;;){if(l.nextSibling){l=l.nextSibling;break}if(l.parentNode===b)break a;l=l.parentNode}}}function g(a){function b(b,c){var d=B[c];d.stencil||(d.stencil=a(d));var e=d.stencil.cloneNode(!1);return e.setAttribute("data-mce-index",c),b&&e.appendChild(C.doc.createTextNode(b)),e}return function(a){var c,d,e,f=a.startNode,g=a.endNode,h=a.matchIndex,i=C.doc;if(f===g){var j=f;e=j.parentNode,a.startNodeIndex>0&&(c=i.createTextNode(j.data.substring(0,a.startNodeIndex)),e.insertBefore(c,j));var k=b(a.match,h);return e.insertBefore(k,j),a.endNodeIndex<j.length&&(d=i.createTextNode(j.data.substring(a.endNodeIndex)),e.insertBefore(d,j)),j.parentNode.removeChild(j),k}c=i.createTextNode(f.data.substring(0,a.startNodeIndex)),d=i.createTextNode(g.data.substring(a.endNodeIndex));for(var l=b(f.data.substring(a.startNodeIndex),h),m=[],n=0,o=a.innerNodes.length;n<o;++n){var p=a.innerNodes[n],q=b(p.data,h);p.parentNode.replaceChild(q,p),m.push(q)}var r=b(g.data.substring(0,a.endNodeIndex),h);return e=f.parentNode,e.insertBefore(c,f),e.insertBefore(l,f),e.removeChild(f),e=g.parentNode,e.insertBefore(r,g),e.insertBefore(d,g),e.removeChild(g),r}}function h(a){var b=a.parentNode;b.insertBefore(a.firstChild,a),a.parentNode.removeChild(a)}function i(a){return a.className.indexOf("mce-spellchecker-word")!==-1}function j(a){var c=b.getElementsByTagName("*"),d=[];a="number"==typeof a?""+a:null;for(var e=0;e<c.length;e++){var f=c[e],g=f.getAttribute("data-mce-index");null!==g&&g.length&&i(f)&&(g!==a&&null!==a||d.push(f))}return d}function k(a){for(var b=B.length;b--;)if(B[b]===a)return b;return-1}function l(a){var b=[];return m(function(c,d){a(c,d)&&b.push(c)}),B=b,this}function m(a){for(var b=0,c=B.length;b<c&&a(B[b],b)!==!1;b++);return this}function n(a){return B.length&&f(b,B,g(a)),this}function o(a,b){if(x&&a.global)for(;w=a.exec(x);)B.push(d(w,b));return this}function p(a){var b,c=j(a?k(a):null);for(b=c.length;b--;)h(c[b]);return this}function q(a){return B[a.getAttribute("data-mce-index")]}function r(a){return j(k(a))[0]}function s(a,b,c){return B.push({start:a,end:a+b,text:x.substr(a,b),data:c}),this}function t(a){var b=j(k(a)),d=c.dom.createRng();return d.setStartBefore(b[0]),d.setEndAfter(b[b.length-1]),d}function u(a,b){var d=t(a);return d.deleteContents(),b.length>0&&d.insertNode(c.dom.doc.createTextNode(b)),d}function v(){return B.splice(0,B.length),p(),this}var w,x,y,z,A,B=[],C=c.dom;return y=c.schema.getBlockElements(),z=c.schema.getWhiteSpaceElements(),A=c.schema.getShortEndedElements(),x=e(b),{text:x,matches:B,each:m,filter:l,reset:v,matchFromElement:q,elementFromMatch:r,find:o,add:s,wrap:n,unwrap:p,replace:u,rangeFromMatch:t,indexOf:k}}}),g("a",["c","g","h","i","5","j"],function(a,b,c,d,e,f){var g=function(a,b){if(!b.get()){var c=new f(a.getBody(),a);b.set(c)}return b.get()},h=function(a){for(var b in a)return!1;return!0},i=function(d,f,g){return function(h,i,j,k){var l={method:h,lang:g.get()},m="";l["addToDictionary"===h?"word":"text"]=i,a.each(l,function(a,b){m&&(m+="&"),m+=b+"="+encodeURIComponent(a)}),c.send({url:new b(f).toAbsolute(e.getRpcUrl(d)),type:"post",content_type:"application/x-www-form-urlencoded",data:m,success:function(a){if(a=JSON.parse(a))a.error?k(a.error):j(a);else{var b=d.translate("Server response wasn't proper JSON.");k(b)}},error:function(){var a=d.translate("The spelling service was not found: (")+e.getRpcUrl(d)+d.translate(")");k(a)}})}},j=function(a,b,c,d,f,g,h){var j=e.getSpellcheckerCallback(a),k=j?j:i(a,b,c);k.call(a.plugins.spellchecker,d,f,g,h)},k=function(a,b,c,d,e,f){if(!o(a,c,d)){var h=function(b){a.notificationManager.open({text:b,type:"error"}),a.setProgressState(!1),o(a,c,d)},i=function(b){r(a,c,d,e,b)};a.setProgressState(!0),j(a,b,f,"spellcheck",g(a,d).text,i,h),a.focus()}},l=function(a,b,c){a.dom.select("span.mce-spellchecker-word").length||o(a,b,c)},m=function(a,b,c,d,e,f){a.setProgressState(!0),j(a,b,"addToDictionary",e,function(){a.setProgressState(!1),a.dom.remove(f,!0),l(a,c,d)},function(b){a.notificationManager.open({text:b,type:"error"}),a.setProgressState(!1)})},n=function(b,c,d,e,f,g){b.selection.collapse(),g?a.each(b.dom.select("span.mce-spellchecker-word"),function(a){a.getAttribute("data-mce-word")===e&&b.dom.remove(a,!0)}):b.dom.remove(f,!0),l(b,c,d)},o=function(a,b,c){if(g(a,c).reset(),c.set(null),b.get())return b.set(!1),d.fireSpellcheckEnd(a),!0},p=function(a){var b=a.getAttribute("data-mce-index");return"number"==typeof b?""+b:b},q=function(b,c){var d,e=[];if(d=a.toArray(b.getBody().getElementsByTagName("span")),d.length)for(var f=0;f<d.length;f++){var g=p(d[f]);null!==g&&g.length&&g===c.toString()&&e.push(d[f])}return e},r=function(a,b,c,f,i){var j,k;if(i.words?(k=!!i.dictionary,j=i.words):j=i,a.setProgressState(!1),h(j)){var l=a.translate("No misspellings found.");return a.notificationManager.open({text:l,type:"info"}),void b.set(!1)}f.set({suggestions:j,hasDictionarySupport:k}),g(a,c).find(e.getSpellcheckerWordcharPattern(a)).filter(function(a){return!!j[a.text]}).wrap(function(b){return a.dom.create("span",{"class":"mce-spellchecker-word","data-mce-bogus":1,"data-mce-word":b.text})}),b.set(!0),d.fireSpellcheckStart(a)};return{spellcheck:k,checkIfFinished:l,addToDictionary:m,ignoreWord:n,findSpansByIndex:q,getElmIndex:p,markErrors:r}}),g("3",["5","a"],function(a,b){var c=function(c,d,e,f,g){var h=function(){return a.getLanguage(c)},i=function(){return a.getSpellcheckerWordcharPattern(c)},j=function(a){b.markErrors(c,d,f,e,a)},k=function(){return f.get()};return{getTextMatcher:k,getWordCharPattern:i,markErrors:j,getLanguage:h}};return{get:c}}),g("4",["a"],function(a){var b=function(b,c,d,e,f,g){b.addCommand("mceSpellCheck",function(){a.spellcheck(b,c,d,e,f,g)})};return{register:b}}),h("b",window),g("6",["b","2"],function(a,b){var c=function(c){return!(!/(^|[ ,])tinymcespellchecker([, ]|$)/.test(c.settings.plugins)||!b.get("tinymcespellchecker"))&&("undefined"!=typeof a.console&&a.console.log&&a.console.log("Spell Checker Pro is incompatible with Spell Checker plugin! Remove 'spellchecker' from the 'plugins' option."),!0)};return{hasProPlugin:c}}),g("7",["c","5","a"],function(a,b,c){var d=function(b,c){var d=[];return a.each(c,function(a){d.push({selectable:!0,text:a.name,data:a.value})}),d},e=function(a){return function(c){var d=b.getLanguage(a);c.control.items().each(function(a){a.active(a.settings.data===d)})}},f=function(c){return a.map(b.getLanguages(c).split(","),function(a){return a=a.split("="),{name:a[0],value:a[1]}})},g=function(a,b,g,h,i,j){var k=d("Language",f(a)),l=function(){c.spellcheck(a,b,g,h,j,i)},m={tooltip:"Spellcheck",onclick:l,onPostRender:function(b){var c=b.control;a.on("SpellcheckStart SpellcheckEnd",function(){c.active(g.get())})}};k.length>1&&(m.type="splitbutton",m.menu=k,m.onshow=e(a),m.onselect=function(a){i.set(a.control.settings.data)}),a.addButton("spellchecker",m),a.addMenuItem("spellchecker",{text:"Spellcheck",context:"tools",onclick:l,selectable:!0,onPostRender:function(){var b=this;b.active(g.get()),a.on("SpellcheckStart SpellcheckEnd",function(){b.active(g.get())})}})};return{register:g}}),h("d",document),g("e",["9"],function(a){return a("tinymce.dom.DOMUtils")}),g("f",["9"],function(a){return a("tinymce.ui.Factory")}),g("8",["d","e","f","c","5","a"],function(a,b,c,d,e,f){var g,h=function(e,h,i,j,k,l,m){var n=[],o=i.get().suggestions[l];d.each(o,function(a){n.push({text:a,onclick:function(){e.insertContent(e.dom.encode(a)),e.dom.remove(m),f.checkIfFinished(e,j,k)}})}),n.push({text:"-"});var p=i.get().hasDictionarySupport;p&&n.push({text:"Add to Dictionary",onclick:function(){f.addToDictionary(e,h,j,k,l,m)}}),n.push.apply(n,[{text:"Ignore",onclick:function(){f.ignoreWord(e,j,k,l,m)}},{text:"Ignore all",onclick:function(){f.ignoreWord(e,j,k,l,m,!0)}}]),g=c.create("menu",{items:n,context:"contextmenu",onautohide:function(a){a.target.className.indexOf("spellchecker")!==-1&&a.preventDefault()},onhide:function(){g.remove(),g=null}}),g.renderTo(a.body);var q=b.DOM.getPos(e.getContentAreaContainer()),r=e.dom.getPos(m[0]),s=e.dom.getRoot();"BODY"===s.nodeName?(r.x-=s.ownerDocument.documentElement.scrollLeft||s.scrollLeft,r.y-=s.ownerDocument.documentElement.scrollTop||s.scrollTop):(r.x-=s.scrollLeft,r.y-=s.scrollTop),q.x+=r.x,q.y+=r.y,g.moveTo(q.x,q.y+m[0].offsetHeight)},i=function(a,b,c,d,e){a.on("click",function(g){var i=g.target;if("mce-spellchecker-word"===i.className){g.preventDefault();var j=f.findSpansByIndex(a,f.getElmIndex(i));if(j.length>0){var k=a.dom.createRng();k.setStartBefore(j[0]),k.setEndAfter(j[j.length-1]),a.selection.setRng(k),h(a,b,c,d,e,i.getAttribute("data-mce-word"),j)}}})};return{setup:i}}),g("0",["1","2","3","4","5","6","7","8"],function(a,b,c,d,e,f,g,h){return b.add("spellchecker",function(b,i){var j=a(!1),k=a(e.getLanguage(b)),l=a(null),m=a({});return f.hasProPlugin(b)===!1&&(g.register(b,i,j,l,k,m),h.setup(b,i,m,j,l),d.register(b,i,j,l,m,k)),c.get(b,j,m,l,i)}),function(){}}),d("0")()}();
>>>>>>> Stashed changes
